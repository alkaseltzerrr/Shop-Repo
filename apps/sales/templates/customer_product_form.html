{% extends 'base.html' %}

{% block title %}Sales - Sales Management System{% endblock %}

{% block content %}
<div class="p-8">
    <h1 class="text-3xl font-bold mb-8">Transactions</h1>

    <div class="mb-6 border-b">
        <nav class="flex gap-8">
            <a href="{% url 'supplier_product_form' %}" class="pb-4 text-gray-500 hover:text-gray-700">
                Buy
            </a>
            <a href="{% url 'customer_product_form' %}" class="pb-4 text-blue-600 border-b-2 border-blue-600 font-medium">
                Sell
            </a>
            <a href="{% url 'order_transaction_history' %}" class="pb-4 text-gray-500 hover:text-gray-700">
                Buy History
            </a>
            <a href="{% url 'sale_transaction_history' %}" class="pb-4 text-gray-500 hover:text-gray-700">
                Sell History
            </a>
        </nav>
    </div>

    <!-- Form -->
    <div class="max-w-2xl bg-white rounded-lg shadow-sm p-8">
        <h2 class="text-2xl font-semibold mb-8">Sell Items</h2>

        <form method="post" class="space-y-8">
            {% csrf_token %}

            <!-- Customer Section -->
            <div class="space-y-4">
                <h3 class="text-lg font-medium text-gray-700">Customer</h3>
                <div class="space-y-4">
                    <div>
                        <label for="{{ customer_form.customername.id }}" class="block text-sm font-medium text-gray-700">Name</label>
                        {{ customer_form.customername.errors }}
                        <input type="text" name="{{ customer_form.customername.name }}" id="{{ customer_form.customername.id }}" {% if customer_form.customername.value %}value="{{ customer_form.customername.value }}"{% endif %} class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Name">
                    </div>
                    <div>
                        <label for="{{ customer_form.contactinformation.id }}" class="block text-sm font-medium text-gray-700">Contact Information</label>
                        {{ customer_form.contactinformation.errors }}
                        <input type="text" name="{{ customer_form.contactinformation.name }}" id="{{ customer_form.contactinformation.id }}" {% if customer_form.contactinformation.value %}value="{{ customer_form.contactinformation.value }}"{% endif %} class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Contact Information">
                    </div>
                </div>
            </div>

            <div class="border-t my-8"></div>

            <!-- Product Section -->
            <div class="space-y-4">
                <h3 class="text-lg font-medium text-gray-700">Product</h3>
                <div class="space-y-4">
                    <div>
                        <label for="{{ product_form.productName.id }}" class="block text-sm font-medium text-gray-700">Product Name</label>
                        {{ product_form.productName.errors }}
                        <input type="text" name="{{ product_form.productName.name }}" id="{{ product_form.productName.id }}" {% if product_form.productName.value %}value="{{ product_form.productName.value }}"{% endif %} class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Product Name">
                    </div>
                    <div>
                        <label for="{{ product_form.price.id }}" class="block text-sm font-medium text-gray-700">Price</label>
                        {{ product_form.price.errors }}
                        <input type="number" name="{{ product_form.price.name }}" id="{{ product_form.price.id }}" {% if product_form.price.value %}value="{{ product_form.price.value }}"{% endif %} class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Price">
                    </div>
                    <div>
                        <label for="{{ product_form.expireyDate.id }}" class="block text-sm font-medium text-gray-700">Expiry Date</label>
                        {{ product_form.expireyDate.errors }}
                        <input type="date" name="{{ product_form.expireyDate.name }}" id="{{ product_form.expireyDate.id }}" {% if product_form.expireyDate.value %}value="{{ product_form.expireyDate.value|date:'Y-m-d' }}"{% endif %} class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Expiry Date">
                    </div>
                    <div>
                        <label for="{{ product_form.categoryID.id }}" class="block text-sm font-medium text-gray-700">Category</label>
                        {{ product_form.categoryID.errors }}
                        <select name="{{ product_form.categoryID.name }}" id="{{ product_form.categoryID.id }}" class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0">
                            {% for category in product_form.categoryID.field.queryset %}
                                <option value="{{ category.pk }}" {% if product_form.categoryID.value == category.pk %}selected{% endif %}>{{ category }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <div class="border-t my-8"></div>

            <!-- Sale Section -->
            <div class="space-y-4">
                <h3 class="text-lg font-medium text-gray-700">Sale</h3>
                <div class="space-y-4">
                    <div>
                        <label for="{{ sale_form.SaleDate.id }}" class="block text-sm font-medium text-gray-700">Sale Date</label>
                        {{ sale_form.SaleDate.errors }}
                        <input type="date" name="{{ sale_form.SaleDate.name }}" id="{{ sale_form.SaleDate.id }}" {% if sale_form.SaleDate.value %}value="{{ sale_form.SaleDate.value|date:'Y-m-d' }}"{% endif %} class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Sale Date">
                    </div>
                    <div>
                        <label for="{{ sale_form.Employee.id }}" class="block text-sm font-medium text-gray-700">Employee</label>
                        {{ sale_form.Employee.errors }}
                        <select name="{{ sale_form.Employee.name }}" id="{{ sale_form.Employee.id }}" class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0">
                            {% for employee in sale_form.Employee.field.queryset %}
                                <option value="{{ employee.pk }}" {% if sale_form.Employee.value == employee.pk %}selected{% endif %}>{{ employee }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <div class="border-t my-8"></div>

            <!-- Sale Detail Section -->
            <div class="space-y-4">
                <h3 class="text-lg font-medium text-gray-700">Sale Detail</h3>
                <div class="space-y-4">
                    <div>
                        <label for="{{ sale_detail_form.Quantity.id }}" class="block text-sm font-medium text-gray-700">Quantity</label>
                        {{ sale_detail_form.Quantity.errors }}
                        <input type="number" name="{{ sale_detail_form.Quantity.name }}" id="{{ sale_detail_form.Quantity.id }}" {% if sale_detail_form.Quantity.value %}value="{{ sale_detail_form.Quantity.value }}"{% endif %} class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Quantity">
                    </div>
                    <div>
                        <label for="{{ sale_detail_form.UnitPrice.id }}" class="block text-sm font-medium text-gray-700">Unit Price</label>
                        {{ sale_detail_form.UnitPrice.errors }}
                        <input type="number" name="{{ sale_detail_form.UnitPrice.name }}" id="{{ sale_detail_form.UnitPrice.id }}" {% if sale_detail_form.UnitPrice.value %}value="{{ sale_detail_form.UnitPrice.value }}"{% endif %} class="w-full px-4 py-2 rounded bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Unit Price">
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="flex justify-center mt-8">
                <button type="submit" class="px-8 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    Sell
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}